<!DOCTYPE html>
<html lang="sv">
<head>
   <meta charset="UTF-8">
   <meta name="viewport" content="width=device-width, initial-scale=1.0">
   <title>Fysikquiz: Källkritik (Åk 9)</title>
   <!-- Importerar moderna fonter från Google Fonts -->
   <link rel="preconnect" href="https://fonts.googleapis.com">
   <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
   <link href="https://fonts.googleapis.com/css2?family=Open+Sans:wght@400;600&family=Poppins:wght@500;700&display=swap" rel="stylesheet">
  
   <style>
       :root {
           /* Färgpalett - Professionell & Ren */
           --card-bg: #ffffff;
          
           --brand-color: #2c3e50;
           --brand-gradient: linear-gradient(135deg, #2c3e50 0%, #3498db 100%);
          
           --accent-color: #3498db;
          
           --success-color: #10ac84;
           --success-bg: #e3f9f1;
          
           --error-color: #ee5253;
           --error-bg: #ffeded;
          
           --text-main: #2d3436;
           --text-muted: #636e72;
          
           --shadow-card: 0 10px 25px rgba(0,0,0,0.15);
           --shadow-hover: 0 6px 16px rgba(0,0,0,0.12);
           --radius-main: 16px;
       }


       body {
           font-family: 'Open Sans', sans-serif;
           /* Gråaktig fade (Silver/Metallic style) */
           background-image: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
           color: var(--text-main);
           margin: 0;
           padding: 15px;
           display: flex;
           justify-content: center;
           align-items: flex-start;
           min-height: 100vh;
       }


       .container {
           background-color: var(--card-bg);
           width: 100%;
           max-width: 680px;
           border-radius: var(--radius-main);
           box-shadow: var(--shadow-card);
           overflow: hidden;
           display: flex;
           flex-direction: column;
           position: relative;
           margin-top: 3vh;
           margin-bottom: 3vh;
       }


       header {
           background: var(--brand-gradient);
           color: white;
           padding: 20px;
           text-align: center;
           position: relative;
           overflow: hidden;
       }


       h1 {
           font-family: 'Poppins', sans-serif;
           margin: 0;
           font-size: 1.5rem;
           font-weight: 700;
           letter-spacing: -0.3px;
       }


       .content-area {
           padding: 25px 30px;
           flex-grow: 1;
       }


       h2 {
           font-family: 'Poppins', sans-serif;
           color: var(--brand-color);
           margin-top: 0;
           font-size: 1.3rem;
           margin-bottom: 0.8rem;
           line-height: 1.3;
       }


       /* Fact Section Styles */
       .fact-box {
           background: #f8f9fa;
           border-radius: 12px;
           padding: 20px;
           margin-bottom: 20px;
           /* Ingen border-left */
           display: flex;
           gap: 15px;
           align-items: flex-start;
       }
      
       .fact-icon {
           font-size: 2rem;
           display: block;
           margin-top: -5px;
       }
      
       .fact-content {
           flex: 1;
       }


       .btn {
           background: var(--brand-gradient);
           color: white;
           border: none;
           padding: 12px 24px;
           font-family: 'Poppins', sans-serif;
           font-size: 1rem;
           font-weight: 600;
           border-radius: 8px;
           cursor: pointer;
           transition: all 0.2s ease;
           display: block;
           width: 100%;
           margin-top: 20px;
           box-shadow: 0 4px 10px rgba(52, 152, 219, 0.2);
       }


       .btn:hover {
           transform: translateY(-2px);
           box-shadow: 0 6px 14px rgba(52, 152, 219, 0.3);
           opacity: 0.95;
       }


       /* Question Styles */
       .question-meta {
           display: inline-block;
           color: var(--text-muted);
           font-size: 0.85rem;
           margin-bottom: 10px;
           font-weight: 600;
           text-transform: uppercase;
           letter-spacing: 0.5px;
       }


       .options-grid {
           display: grid;
           gap: 12px;
           margin-top: 20px;
       }


       .option-btn {
           background-color: #fff;
           border: 2px solid #f1f2f6;
           padding: 15px 20px;
           text-align: left;
           border-radius: 10px;
           cursor: pointer;
           font-family: 'Open Sans', sans-serif;
           font-size: 0.95rem;
           font-weight: 500;
           transition: all 0.15s ease;
           color: var(--text-main);
           position: relative;
       }


       .option-btn:hover:not(:disabled) {
           border-color: var(--accent-color);
           background-color: #f8fcff;
           transform: translateX(3px);
           box-shadow: 0 2px 5px rgba(0,0,0,0.05);
       }
      
       /* Status states for options */
       .option-btn.correct {
           background-color: var(--success-bg);
           border-color: var(--success-color);
           color: #0b6e4f;
           font-weight: 600;
       }
      
       .option-btn.correct::after {
           content: "✓";
           position: absolute;
           right: 15px;
           font-weight: bold;
       }


       .option-btn.incorrect {
           background-color: var(--error-bg);
           border-color: var(--error-color);
           color: #c0392b;
           opacity: 0.8;
       }


       .option-btn:disabled {
           cursor: default;
       }


       /* Feedback Box */
       .feedback-box {
           margin-top: 20px;
           padding: 20px 25px;
           border-radius: 12px;
           background-color: #f8f9fa;
           color: var(--text-main);
           border: 1px solid #e9ecef;
           display: none;
           animation: fadeIn 0.3s ease;
       }
      
       .feedback-box h3 {
           margin-top: 0;
           font-family: 'Poppins', sans-serif;
           font-size: 1.2rem;
           display: flex;
           align-items: center;
           gap: 8px;
           margin-bottom: 8px;
       }


       .feedback-box.success h3 {
           color: var(--success-color);
       }
      
       .feedback-box.error h3 {
           color: var(--error-color);
       }


       .feedback-box strong {
           color: var(--brand-color);
       }


       @keyframes fadeIn {
           from { opacity: 0; transform: translateY(5px); }
           to { opacity: 1; transform: translateY(0); }
       }


       /* Progress Bar Styles */
       .progress-bar-container {
           height: 6px;
           background-color: #f1f3f5;
           width: 100%;
           position: relative;
           z-index: 10;
       }


       .progress-bar {
           height: 100%;
           background: linear-gradient(90deg, #4facfe 0%, #00f2fe 100%);
           width: 0%;
           transition: width 0.5s cubic-bezier(0.34, 1.56, 0.64, 1);
           border-radius: 0 4px 4px 0;
           box-shadow: 0 0 10px rgba(79, 172, 254, 0.5);
       }


       /* Summary Styles */
       .summary-stats {
           text-align: center;
           background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
           border: 1px solid #dee2e6;
           padding: 30px 20px;
           border-radius: 12px;
           margin-bottom: 20px;
       }


       .summary-score {
           font-size: 3.5rem;
           font-family: 'Poppins', sans-serif;
           font-weight: 700;
           display: block;
           margin: 5px 0;
           line-height: 1;
           background: linear-gradient(135deg, #2c3e50 0%, #3498db 100%);
           -webkit-background-clip: text;
           -webkit-text-fill-color: transparent;
       }
      
       .summary-list {
           max-height: 400px;
           overflow-y: auto;
           padding-right: 10px;
       }
      
       .summary-item {
           background: white;
           border-bottom: 1px solid #f1f1f1;
           padding: 12px 0;
       }
      
       .summary-item:last-child {
           border-bottom: none;
       }


       .summary-question {
           font-weight: 600;
           margin-bottom: 4px;
           display: block;
           font-size: 0.95rem;
       }
      
       .summary-answer-row {
           font-size: 0.9rem;
       }


       .summary-correct-text { color: var(--success-color); font-weight: 600; }
       .summary-wrong-text { color: var(--error-color); text-decoration: line-through; opacity: 0.8;}
       .real-answer { color: var(--success-color); font-weight: 600; margin-left: 5px; }


       /* Helpers */
       strong {
           color: var(--brand-color);
           font-weight: 700;
       }


   </style>
</head>
<body>


<div class="container">
   <header>
       <h1 id="header-title">Fysikquiz: Källkritik</h1>
   </header>
   <div class="progress-bar-container">
       <div class="progress-bar" id="progress-bar"></div>
   </div>


   <div class="content-area" id="app">
       <!-- Content will be injected here by JavaScript -->
   </div>
</div>


<script>
   // --- DATA ---
   const quizData = [
       {
           title: "Del 1: Den vetenskapliga metoden",
           icon: "🔬",
           text: "Inom naturvetenskapen räcker det inte med att göra ett experiment en gång. För att ett resultat ska räknas som fakta måste det vara <strong>reproducerbart</strong>. Det betyder att om en annan forskare gör om exakt samma experiment, ska resultatet bli detsamma. För att veta vad som påverkar resultatet måste man ha <strong>variabelkontroll</strong>. Man ändrar bara en sak (den oberoende variabeln) och håller alla andra faktorer konstanta.",
           questions: [
               {
                   q: "Varför är det viktigt att forskare beskriver sin metod väldigt noga i sina rapporter?",
                   options: [
                       "För att rapporten ska bli tillräckligt lång.",
                       "För att andra forskare ska kunna göra om experimentet för att se om resultatet stämmer.",
                       "För att bevisa att de har använt dyr utrustning.",
                       "För att ingen annan ska kunna stjäla deras idé."
                   ],
                   correct: 1,
                   explanation: "Genomskinlighet i metoden krävs för <strong>reproducerbarhet</strong>. Om ingen kan göra om det, litar man inte på resultatet."
               },
               {
                   q: "Pelle ska testa om varmt vatten fryser snabbare än kallt. Han ställer en liten kopp varmt vatten i frysen och en stor hink kallt vatten utomhus. Vad är det största felet?",
                   options: [
                       "Han har inte kontrollerat variablerna (olika vattenmängd, behållare, platser).",
                       "Han borde ha använt ljummet vatten också.",
                       "Han mäter inte temperaturen varje minut.",
                       "Det går inte att frysa varmt vatten."
                   ],
                   correct: 0,
                   explanation: "Eftersom han ändrade både vattenmängd och plats vet han inte vad som orsakade resultatet. Detta är bristande <strong>variabelkontroll</strong>."
               },
               {
                   q: "En forskare mäter spänningen i ett batteri fem gånger och får olika värden (1,51 V, 1,49 V, etc). Varför gör hen fem mätningar?",
                   options: [
                       "För att tiden ska gå fortare.",
                       "För att öka tillförlitligheten genom att räkna ut ett medelvärde och minska slumpens inverkan.",
                       "För att batteriet blir bättre ju fler gånger man mäter.",
                       "För att det är lag på att mäta fem gånger."
                   ],
                   correct: 1,
                   explanation: "Genom att upprepa mätningen ser man om värdena spretar och kan få fram ett noggrannare <strong>medelvärde</strong>."
               }
           ]
       },
       {
           title: "Del 2: Källans syfte och jäv",
           icon: "⚖️",
           text: "När du granskar en källa måste du alltid titta på avsändaren och syftet. Är syftet att informera, sälja eller påverka? Om den som betalar för en studie tjänar pengar på ett visst resultat finns det risk för <strong>jäv</strong> (intressekonflikt). Myndigheter och universitet anses ofta mer trovärdiga än företag, eftersom deras uppdrag är att vara opartiska och tjäna allmänheten, inte att göra vinst.",
           questions: [
               {
                   q: "Du läser en artikel med rubriken 'Kärnkraft är den enda lösningen för klimatet'. Vem av följande författare bör du vara mest kritisk mot?",
                   options: [
                       "En professor i energisystem vid Chalmers Tekniska Högskola.",
                       "En journalist på tidningen Forskning & Framsteg.",
                       "VD:n för ett bolag som bygger kärnreaktorer.",
                       "En expertutredning från Naturvårdsverket."
                   ],
                   correct: 2,
                   explanation: "VD:n har ett <strong>ekonomiskt intresse</strong> (vinstsyfte) av att kärnkraften framställs positivt, vilket ökar risken för vinklad information."
               },
               {
                   q: "Varför anses Strålsäkerhetsmyndigheten vara en trovärdig källa när det gäller risker med mobilstrålning?",
                   options: [
                       "För att de säljer strålningsskydd.",
                       "För att de har den snyggaste hemsidan.",
                       "För att de aldrig ändrar sina åsikter.",
                       "För att det är en statlig myndighet med uppdrag att objektivt skydda medborgarna."
                   ],
                   correct: 3,
                   explanation: "Myndigheter har inget vinstintresse och arbetar på uppdrag av regeringen för allmänhetens bästa."
               }
           ]
       },
       {
           title: "Del 3: Korrelation och Kausalitet",
           icon: "📈",
           text: "Ett vanligt misstag är att blanda ihop <strong>korrelation</strong> (samband) med <strong>kausalitet</strong> (orsak). Bara för att två kurvor följs åt betyder det inte att den ena orsakar den andra. Det kan vara en slump eller en tredje faktor som påverkar båda. Exempel: Glassförsäljning och drunkningsolyckor ökar samtidigt på sommaren, men glass orsakar inte drunkning. Den bakomliggande faktorn är värmen.",
           questions: [
               {
                   q: "En studie visar att barn som har större fötter är bättre på fysik än barn med små fötter. Vad är den troligaste förklaringen?",
                   options: [
                       "Stora fötter gör att blodet rinner snabbare till hjärnan.",
                       "Det finns en korrelation, men orsaken är ålder. Äldre barn har både större fötter och kan mer fysik.",
                       "Det är bevisat att skostorlek påverkar intelligensen.",
                       "Studien är påhittad, det finns inget samband."
                   ],
                   correct: 1,
                   explanation: "Detta är ett klassiskt exempel på <strong>skensamband</strong>. Åldern är den tredje faktorn som förklarar båda variablerna."
               },
               {
                   q: "Hur kan forskare ta reda på om mobilstrålning faktiskt orsakar huvudvärk, och inte bara råkar sammanfalla med det?",
                   options: [
                       "Genom att fråga folk på stan vad de tror.",
                       "Genom att förbjuda mobiler och se om huvudvärken försvinner.",
                       "Genom en kontrollerad studie där en grupp utsätts för strålning och en annan inte, utan att veta vilken grupp de tillhör.",
                       "Det går inte att ta reda på."
                   ],
                   correct: 2,
                   explanation: "Endast genom <strong>kontrollerade experiment</strong> där man isolerar variabeln (strålning) kan man säkerställa <strong>kausalitet</strong>."
               }
           ]
       },
       {
           title: "Del 4: Granskning & Pseudovetenskap",
           icon: "🕵️‍♀️",
           text: "Vetenskapliga studier granskas alltid av andra experter innan de publiceras. Detta kallas <strong>Peer-review</strong> (fackgranskning) och är ett kvalitetsfilter. <strong>Pseudovetenskap</strong> är sådant som låter som vetenskap men inte följer metoderna. Varningstecken är anekdoter ('Det funkade för mig!'), löften om mirakellösningar, konspirationsteorier och felaktig användning av svåra ord (t.ex. 'kvant-energi').",
           questions: [
               {
                   q: "Vad innebär begreppet 'Peer-review'?",
                   options: [
                       "Att du ber en kompis läsa din text.",
                       "Att forskaren betalar för att få sin artikel tryckt.",
                       "Att allmänheten får rösta om studien är bra.",
                       "Att forskningsresultat granskas av oberoende experter inom samma ämne för att säkra kvalitén."
                   ],
                   correct: 3,
                   explanation: "Det är forskarsamhällets viktigaste metod för att sålla bort dålig forskning och fusk."
               },
               {
                   q: "Du ser en annons för ett 'Energi-halsband'. Vilken av följande texter är en tydlig varningssignal för pseudovetenskap?",
                   options: [
                       "Halsbandet är gjort av återvunnen plast.",
                       "Forskare har länge studerat magnetismens effekter.",
                       "Läkarna vägrar erkänna denna hemliga teknik som botar alla sjukdomar med hjälp av kvantvibrationer.",
                       "Vi erbjuder 30 dagars öppet köp."
                   ],
                   correct: 2,
                   explanation: "Kombinationen av konspiration ('läkarna vägrar erkänna'), 'hemlig teknik' och löfte om att bota allt är typisk <strong>pseudovetenskap</strong>."
               },
               {
                   q: "Vilken typ av källa väger tyngst om du ska skriva ett arbete om klimatförändringar?",
                   options: [
                       "En rapport från FN:s klimatpanel (IPCC) som sammanställer tusentals granskade studier.",
                       "En insändare i lokaltidningen.",
                       "En enskild forskningsrapport som precis blivit klar men inte granskad än.",
                       "En dokumentärfilm på YouTube gjord av en privatperson."
                   ],
                   correct: 0,
                   explanation: "En sammanställning av tusentals studier (meta-analys) har mycket högre bevisvärde än enskilda studier eller åsikter."
               }
           ]
       }
   ];


   // --- STATE MANAGEMENT ---
   let currentSectionIndex = 0;
   let currentQuestionIndex = 0; // Relative to current section
   let score = 0;
   let userAnswers = [];
   let state = 'intro'; // 'intro', 'question', 'summary'


   // --- DOM ELEMENTS ---
   const app = document.getElementById('app');
   const headerTitle = document.getElementById('header-title');
   const progressBar = document.getElementById('progress-bar');


   // --- MAIN RENDER FUNCTION ---
   function render() {
       if (state === 'summary') {
           renderSummary();
           return;
       }


       const section = quizData[currentSectionIndex];


       // Update Header with smooth fade
       headerTitle.style.opacity = '0';
       setTimeout(() => {
           headerTitle.innerText = section.title;
           headerTitle.style.transition = 'opacity 0.2s';
           headerTitle.style.opacity = '1';
       }, 150);


       // Calculate total progress
       let totalQuestions = 0;
       let answeredQuestions = 0;
      
       quizData.forEach((sec, idx) => {
           totalQuestions += sec.questions.length;
           if (idx < currentSectionIndex) {
               answeredQuestions += sec.questions.length;
           } else if (idx === currentSectionIndex && state === 'question') {
               answeredQuestions += currentQuestionIndex;
           }
       });
       const pct = (answeredQuestions / totalQuestions) * 100;
       progressBar.style.width = `${pct}%`;


       if (state === 'intro') {
           renderSectionIntro(section);
       } else if (state === 'question') {
           renderQuestion(section.questions[currentQuestionIndex]);
       }
   }


   // --- RENDER SECTION TEXT ---
   function renderSectionIntro(section) {
       // Simple animation class reset
       app.classList.remove('fade-in');
       void app.offsetWidth; // trigger reflow
       app.classList.add('fade-in');


       app.innerHTML = `
           <div class="fact-box">
               <span class="fact-icon">${section.icon}</span>
               <div class="fact-content">
                   <h2>Fakta</h2>
                   <p style="line-height: 1.6; font-size: 1rem; margin-top:0;">${section.text}</p>
               </div>
           </div>
           <button class="btn" onclick="startQuestions()">Starta frågor för denna del</button>
       `;
   }


   // --- RENDER QUESTION ---
   function renderQuestion(q) {
       const totalInCurrent = quizData[currentSectionIndex].questions.length;
      
       // Render with reset styles for feedback box
       app.innerHTML = `
           <div class="question-meta">Del ${currentSectionIndex + 1} • Fråga ${currentQuestionIndex + 1}/${totalInCurrent}</div>
           <h2 style="color: #2c3e50; font-weight: 600; margin-bottom:15px;">${q.q}</h2>
           <div class="options-grid">
               ${q.options.map((opt, idx) => `
                   <button class="option-btn" onclick="handleAnswer(${idx})" id="opt-${idx}">${opt}</button>
               `).join('')}
           </div>
           <div id="feedback" class="feedback-box">
               <h3 id="feedback-title"></h3>
               <p id="feedback-text" style="margin: 5px 0 15px 0; font-size: 0.95rem; line-height: 1.6;"></p>
               <button class="btn" id="next-btn" onclick="nextStep()" style="margin-top:0; width: auto; min-width: 150px;">Nästa fråga ➔</button>
           </div>
       `;
   }


   // --- RENDER SUMMARY ---
   function renderSummary() {
       headerTitle.innerText = "Sammanfattning";
       progressBar.style.width = '100%';
      
       let totalQ = 0;
       quizData.forEach(s => totalQ += s.questions.length);
      
       // Calculate score
       let correctCount = userAnswers.filter(a => a.isCorrect).length;
       let pct = Math.round((correctCount / totalQ) * 100);
      
       let gradeTitle = "";
      
       if(pct > 90) { gradeTitle = "Fantastiskt bra! 🏆"; }
       else if(pct > 70) { gradeTitle = "Mycket bra jobbat! 🌟"; }
       else if(pct > 50) { gradeTitle = "Godkänt! 👍"; }
       else { gradeTitle = "Fortsätt kämpa! 💪"; }


       let html = `
           <div class="summary-stats">
               <h2 style="color:var(--brand-color); margin:0 0 10px 0;">${gradeTitle}</h2>
               <span class="summary-score">${correctCount}/${totalQ}</span>
               <span style="color:#666; font-size: 0.9rem; text-transform: uppercase; letter-spacing: 1px;">Rätt svar</span>
               <button class="btn" onclick="location.reload()" style="background: transparent; border: 2px solid var(--accent-color); color: var(--accent-color); margin-top: 20px; box-shadow:none; width: auto; padding: 10px 30px;">Gör om testet</button>
           </div>
           <h3 style="margin: 0 0 10px 0; font-size: 1.1rem; color: var(--text-muted);">Dina svar:</h3>
           <div class="summary-list">
       `;


       userAnswers.forEach((ans, idx) => {
           const isCorrect = ans.isCorrect;
          
           html += `
               <div class="summary-item">
                   <span class="summary-question">${idx + 1}. ${ans.question}</span>
                   <div class="summary-answer-row">
                       ${isCorrect
                           ? `<span class="summary-correct-text">✔ ${ans.userAnswer}</span>`
                           : `<span class="summary-wrong-text">✖ ${ans.userAnswer}</span> <span style="margin: 0 5px; color:#999;">➔</span> <span class="real-answer">${ans.correctAnswer}</span>`
                       }
                   </div>
               </div>
           `;
       });


       html += `</div>`;
       app.innerHTML = html;
   }


   // --- LOGIC FUNCTIONS ---
   window.startQuestions = function() {
       state = 'question';
       currentQuestionIndex = 0;
       render();
   };


   window.handleAnswer = function(selectedIndex) {
       // Disable all buttons
       const buttons = document.querySelectorAll('.option-btn');
       buttons.forEach(b => b.disabled = true);


       const section = quizData[currentSectionIndex];
       const currentQ = section.questions[currentQuestionIndex];
       const isCorrect = selectedIndex === currentQ.correct;


       // Visual feedback on buttons
       const selectedBtn = document.getElementById(`opt-${selectedIndex}`);
       const correctBtn = document.getElementById(`opt-${currentQ.correct}`);


       if (isCorrect) {
           selectedBtn.classList.add('correct');
       } else {
           selectedBtn.classList.add('incorrect');
           correctBtn.classList.add('correct'); // Show which one was right
       }


       // Show feedback box
       const feedbackBox = document.getElementById('feedback');
       const feedbackTitle = document.getElementById('feedback-title');
       const feedbackText = document.getElementById('feedback-text');
       const nextBtn = document.getElementById('next-btn');


       feedbackBox.style.display = 'block';
      
       // Add class for success/error styling
       if (isCorrect) {
           feedbackBox.className = "feedback-box success";
           feedbackTitle.innerHTML = "Rätt svar!";
       } else {
           feedbackBox.className = "feedback-box error";
           feedbackTitle.innerHTML = "Inte riktigt...";
       }
      
       feedbackText.innerHTML = currentQ.explanation; // Use innerHTML to render <strong> tags


       // Check if last question of entire quiz
       const isLastQuestionOverall = (currentSectionIndex === quizData.length - 1) && (currentQuestionIndex === section.questions.length - 1);
      
       if(isLastQuestionOverall) {
           nextBtn.innerText = "Se resultat 🏁";
       } else if (currentQuestionIndex === section.questions.length - 1) {
           nextBtn.innerText = "Nästa del ➔";
       }


       // Scroll to feedback if needed on mobile, but gently
       const rect = feedbackBox.getBoundingClientRect();
       const isVisible = (rect.top >= 0) && (rect.bottom <= window.innerHeight);
       if (!isVisible) {
            setTimeout(() => {
               feedbackBox.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
           }, 100);
       }


       // Save data
       userAnswers.push({
           question: currentQ.q,
           userAnswer: currentQ.options[selectedIndex],
           correctAnswer: currentQ.options[currentQ.correct],
           isCorrect: isCorrect
       });
   };


   window.nextStep = function() {
       const section = quizData[currentSectionIndex];
      
       // Reset feedback styles for next render
       const feedbackBox = document.getElementById('feedback');
       if(feedbackBox) {
           feedbackBox.style.display = 'none';
       }


       // Check if there are more questions in this section
       if (currentQuestionIndex < section.questions.length - 1) {
           currentQuestionIndex++;
           render();
       } else {
           // End of section, move to next section
           if (currentSectionIndex < quizData.length - 1) {
               currentSectionIndex++;
               state = 'intro';
               render();
           } else {
               // End of quiz
               state = 'summary';
               render();
           }
       }
   };


   // --- INIT ---
   render();


</script>


</body>
</html>